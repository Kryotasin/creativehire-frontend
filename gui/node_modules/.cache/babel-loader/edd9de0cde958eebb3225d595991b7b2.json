{"ast":null,"code":"import _objectSpread from\"G:\\\\Github\\\\creativehire\\\\frontend\\\\gui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"G:\\\\Github\\\\creativehire\\\\frontend\\\\gui\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from'react';import{Row,Col,Avatar,Upload,Button,message,Skeleton}from'antd';import axios from'axios';import{UserOutlined,UploadOutlined}from'@ant-design/icons';function UserProfile(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),username=_useState2[0],setUsername=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),email=_useState4[0],setEmail=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),name=_useState6[0],setName=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),location=_useState8[0],setLocation=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),img_salt=_useState10[0],setImgSalt=_useState10[1];var typeOfImage=function typeOfImage(proc){return{\"type\":\"profile_pic\",\"process\":proc};};var userProfilePictureUploadProps={name:'file',acceptedFiles:'.png',multiple:false,method:'post',data:typeOfImage(\"upload\"),action:'http://127.0.0.1:8000/image-handler/',onRemove:function onRemove(file){console.log(file);axios.post('http://127.0.0.1:8000/image-handler/',_objectSpread({\"file\":file.name},typeOfImage('remove')));},onChange:function onChange(info){var status=info.file.status;if(status!=='uploading'){// console.log(info.file, info.fileList);\n}if(status==='done'){message.success(\"\".concat(info.file.name,\" file uploaded successfully.\"));}else if(status==='error'){message.error(\"\".concat(info.file.name,\" file upload failed.\"));// Reload image\nreloadProfilePicture();}}};var getProfile=function getProfile(){axios.get('http://localhost:8000/userprofile/profile/'+localStorage.getItem('userProfileID')).then(function(res){// Load all profile data\nreloadUsername(res.data['username']);reloadEmail(res.data['email']);reloadName(res.data['name']);reloadLocation(res.data['location']);reloadImgSalt(res.data['img_salt']);setTimeout(function(){return message.success('Profile loaded successfully.');},100);}).catch(function(err){message.error(\"Your profile could not be loaded due to \"+err.message);});};var reloadUsername=function reloadUsername(data){setUsername(data);};var reloadEmail=function reloadEmail(data){setEmail(data);};var reloadName=function reloadName(data){setName(data);};var reloadLocation=function reloadLocation(data){setLocation(data);};var reloadImgSalt=function reloadImgSalt(data){setImgSalt(data);};var reloadProfilePicture=function reloadProfilePicture(){};useEffect(function(){getProfile();},[]);return React.createElement(\"div\",null,React.createElement(Row,{gutter:[8,48]},React.createElement(Col,{xs:{span:6,offset:2},lg:{span:6,offset:2}},React.createElement(Avatar,{shape:\"square\",size:\"large\",icon:img_salt==null?React.createElement(UserOutlined,null):'',src:img_salt==null?'':''})),React.createElement(Col,{xs:{span:5,offset:1},lg:{span:6,offset:2}},React.createElement(\"h1\",null,\"Your Profile\"))),React.createElement(Row,{gutter:[8,48]},React.createElement(Col,{xs:{span:6,offset:2},lg:{span:6,offset:2}},React.createElement(Upload,userProfilePictureUploadProps,React.createElement(Button,{size:\"small\"},\"Change\"))),React.createElement(Col,{xs:{span:5,offset:1},lg:{span:6,offset:2}},\"Username: \",img_salt==null?React.createElement(Skeleton,{active:true}):username)),React.createElement(Row,{gutter:[8,48]},React.createElement(Col,{xs:{span:6,offset:2},lg:{span:6,offset:2}}),React.createElement(Col,{xs:{span:5,offset:1},lg:{span:6,offset:2}},\"Email: \",img_salt==null?React.createElement(Skeleton,{active:true}):email)),React.createElement(Row,{gutter:[8,48]},React.createElement(Col,{xs:{span:6,offset:2},lg:{span:6,offset:2}}),React.createElement(Col,{xs:{span:5,offset:1},lg:{span:6,offset:2}},\"Name: \",img_salt==null?React.createElement(Skeleton,{active:true}):name)));}export default UserProfile;","map":{"version":3,"sources":["G:/Github/creativehire/frontend/gui/src/containers/Profile.js"],"names":["React","useState","useEffect","Row","Col","Avatar","Upload","Button","message","Skeleton","axios","UserOutlined","UploadOutlined","UserProfile","username","setUsername","email","setEmail","name","setName","location","setLocation","img_salt","setImgSalt","typeOfImage","proc","userProfilePictureUploadProps","acceptedFiles","multiple","method","data","action","onRemove","file","console","log","post","onChange","info","status","success","error","reloadProfilePicture","getProfile","get","localStorage","getItem","then","res","reloadUsername","reloadEmail","reloadName","reloadLocation","reloadImgSalt","setTimeout","catch","err","span","offset"],"mappings":"qUAAA,MAAOA,CAAAA,KAAP,EAAgBC,QAAhB,CAA0BC,SAA1B,KAA4C,OAA5C,CACA,OAASC,GAAT,CAAcC,GAAd,CAAmBC,MAAnB,CAA2BC,MAA3B,CAAmCC,MAAnC,CAA2CC,OAA3C,CAAoDC,QAApD,KAAoE,MAApE,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAASC,YAAT,CAAuBC,cAAvB,KAA6C,mBAA7C,CAEA,QAASC,CAAAA,WAAT,EAAuB,eAEYZ,QAAQ,CAAC,EAAD,CAFpB,wCAEba,QAFa,eAEHC,WAFG,8BAGMd,QAAQ,CAAC,EAAD,CAHd,yCAGbe,KAHa,eAGNC,QAHM,8BAIIhB,QAAQ,CAAC,EAAD,CAJZ,yCAIbiB,IAJa,eAIPC,OAJO,8BAKYlB,QAAQ,CAAC,EAAD,CALpB,yCAKbmB,QALa,eAKHC,WALG,8BAMWpB,QAAQ,CAAC,EAAD,CANnB,0CAMbqB,QANa,gBAMHC,UANG,gBASnB,GAAMC,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACC,IAAD,CAAU,CAC1B,MAAO,CAAC,OAAS,aAAV,CAAyB,UAAWA,IAApC,CAAP,CACH,CAFD,CAIA,GAAMC,CAAAA,6BAA6B,CAAG,CAClCR,IAAI,CAAE,MAD4B,CAElCS,aAAa,CAAE,MAFmB,CAGlCC,QAAQ,CAAE,KAHwB,CAIlCC,MAAM,CAAE,MAJ0B,CAKlCC,IAAI,CAAEN,WAAW,CAAC,QAAD,CALiB,CAMlCO,MAAM,CAAE,sCAN0B,CAOlCC,QAPkC,mBAOzBC,IAPyB,CAOpB,CAEVC,OAAO,CAACC,GAAR,CAAYF,IAAZ,EAEAvB,KAAK,CAAC0B,IAAN,CAAW,sCAAX,gBACI,OAAQH,IAAI,CAACf,IADjB,EAEOM,WAAW,CAAC,QAAD,CAFlB,GAKH,CAhBiC,CAkBlCa,QAlBkC,mBAkBzBC,IAlByB,CAkBnB,IACLC,CAAAA,MADK,CACMD,IAAI,CAACL,IADX,CACLM,MADK,CAEb,GAAIA,MAAM,GAAK,WAAf,CAA4B,CAC1B;AACD,CACD,GAAIA,MAAM,GAAK,MAAf,CAAuB,CACrB/B,OAAO,CAACgC,OAAR,WAAmBF,IAAI,CAACL,IAAL,CAAUf,IAA7B,kCACD,CAFD,IAEO,IAAIqB,MAAM,GAAK,OAAf,CAAwB,CAC7B/B,OAAO,CAACiC,KAAR,WAAiBH,IAAI,CAACL,IAAL,CAAUf,IAA3B,0BACA;AAEAwB,oBAAoB,GACrB,CACF,CA/BiC,CAAtC,CAkCA,GAAMC,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,EAAM,CACzBjC,KAAK,CAACkC,GAAN,CAAU,6CAA+CC,YAAY,CAACC,OAAb,CAAqB,eAArB,CAAzD,EACCC,IADD,CACO,SAAAC,GAAG,CAAI,CACV;AAGAC,cAAc,CAACD,GAAG,CAAClB,IAAJ,CAAS,UAAT,CAAD,CAAd,CACAoB,WAAW,CAACF,GAAG,CAAClB,IAAJ,CAAS,OAAT,CAAD,CAAX,CACAqB,UAAU,CAACH,GAAG,CAAClB,IAAJ,CAAS,MAAT,CAAD,CAAV,CACAsB,cAAc,CAACJ,GAAG,CAAClB,IAAJ,CAAS,UAAT,CAAD,CAAd,CACAuB,aAAa,CAACL,GAAG,CAAClB,IAAJ,CAAS,UAAT,CAAD,CAAb,CAIAwB,UAAU,CAAC,iBAAM9C,CAAAA,OAAO,CAACgC,OAAR,CAAgB,8BAAhB,CAAN,EAAD,CAAwD,GAAxD,CAAV,CACC,CAdL,EAgBCe,KAhBD,CAgBO,SAAAC,GAAG,CAAI,CACVhD,OAAO,CAACiC,KAAR,CAAc,2CAA6Ce,GAAG,CAAChD,OAA/D,EACH,CAlBD,EAmBC,CApBD,CAsBA,GAAMyC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACnB,IAAD,CAAU,CAC7Bf,WAAW,CAACe,IAAD,CAAX,CACH,CAFD,CAIA,GAAMoB,CAAAA,WAAW,CAAG,QAAdA,CAAAA,WAAc,CAACpB,IAAD,CAAU,CAC1Bb,QAAQ,CAACa,IAAD,CAAR,CACH,CAFD,CAIA,GAAMqB,CAAAA,UAAU,CAAG,QAAbA,CAAAA,UAAa,CAACrB,IAAD,CAAU,CACzBX,OAAO,CAACW,IAAD,CAAP,CACH,CAFD,CAIA,GAAMsB,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,CAACtB,IAAD,CAAU,CAC7BT,WAAW,CAACS,IAAD,CAAX,CACH,CAFD,CAIA,GAAMuB,CAAAA,aAAa,CAAG,QAAhBA,CAAAA,aAAgB,CAACvB,IAAD,CAAU,CAC5BP,UAAU,CAACO,IAAD,CAAV,CACH,CAFD,CAIA,GAAMY,CAAAA,oBAAoB,CAAG,QAAvBA,CAAAA,oBAAuB,EAAM,CAElC,CAFD,CAIAxC,SAAS,CAAC,UAAM,CACZyC,UAAU,GACb,CAFQ,CAEN,EAFM,CAAT,CAKA,MACI,gCAEI,oBAAC,GAAD,EAAK,MAAM,CAAE,CAAC,CAAD,CAAI,EAAJ,CAAb,EACI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAEc,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAAT,CAAiC,EAAE,CAAE,CAAED,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAArC,EACI,oBAAC,MAAD,EAAQ,KAAK,CAAC,QAAd,CAAuB,IAAI,CAAC,OAA5B,CAAoC,IAAI,CAAEpC,QAAQ,EAAI,IAAZ,CAAmB,oBAAC,YAAD,MAAnB,CAAsC,EAAhF,CAAoF,GAAG,CAAEA,QAAQ,EAAI,IAAZ,CAAmB,EAAnB,CAAwB,EAAjH,EADJ,CADJ,CAII,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAEmC,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAAT,CAAiC,EAAE,CAAE,CAAED,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAArC,EACI,6CADJ,CAJJ,CAFJ,CAWI,oBAAC,GAAD,EAAK,MAAM,CAAE,CAAC,CAAD,CAAI,EAAJ,CAAb,EACI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAED,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAAT,CAAiC,EAAE,CAAE,CAAED,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAArC,EACI,oBAAC,MAAD,CAAYhC,6BAAZ,CACI,oBAAC,MAAD,EACI,IAAI,CAAC,OADT,WADJ,CADJ,CADJ,CASI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAE+B,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAAT,CAAiC,EAAE,CAAE,CAAED,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAArC,eACepC,QAAQ,EAAI,IAAZ,CAAmB,oBAAC,QAAD,EAAU,MAAM,KAAhB,EAAnB,CAAyCR,QADxD,CATJ,CAXJ,CA0BI,oBAAC,GAAD,EAAK,MAAM,CAAE,CAAC,CAAD,CAAI,EAAJ,CAAb,EACI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAE2C,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAAT,CAAiC,EAAE,CAAE,CAAED,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAArC,EADJ,CAGI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAED,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAAT,CAAiC,EAAE,CAAE,CAAED,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAArC,YACYpC,QAAQ,EAAI,IAAZ,CAAmB,oBAAC,QAAD,EAAU,MAAM,KAAhB,EAAnB,CAAyCN,KADrD,CAHJ,CA1BJ,CAmCI,oBAAC,GAAD,EAAK,MAAM,CAAE,CAAC,CAAD,CAAI,EAAJ,CAAb,EACI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAEyC,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAAT,CAAiC,EAAE,CAAE,CAAED,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAArC,EADJ,CAGI,oBAAC,GAAD,EAAK,EAAE,CAAE,CAAED,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAAT,CAAiC,EAAE,CAAE,CAAED,IAAI,CAAE,CAAR,CAAWC,MAAM,CAAE,CAAnB,CAArC,WACWpC,QAAQ,EAAI,IAAZ,CAAmB,oBAAC,QAAD,EAAU,MAAM,KAAhB,EAAnB,CAAyCJ,IADpD,CAHJ,CAnCJ,CADJ,CA+CH,CAED,cAAeL,CAAAA,WAAf","sourcesContent":["import React, { useState, useEffect }  from 'react';\r\nimport { Row, Col, Avatar, Upload, Button, message, Skeleton } from 'antd';\r\nimport axios from 'axios';\r\nimport { UserOutlined, UploadOutlined } from '@ant-design/icons';\r\n\r\nfunction UserProfile() {\r\n\r\n    const[username, setUsername] = useState('');\r\n    const[email, setEmail] = useState('');\r\n    const[name, setName] = useState('');\r\n    const[location, setLocation] = useState('');\r\n    const[img_salt, setImgSalt] = useState('');\r\n\r\n\r\n    const typeOfImage = (proc) => {\r\n        return {\"type\" : \"profile_pic\", \"process\": proc}\r\n    }\r\n    \r\n    const userProfilePictureUploadProps = {\r\n        name: 'file',\r\n        acceptedFiles: '.png',\r\n        multiple: false,\r\n        method: 'post',\r\n        data: typeOfImage(\"upload\"),\r\n        action: 'http://127.0.0.1:8000/image-handler/',\r\n        onRemove(file){\r\n\r\n            console.log(file);\r\n            \r\n            axios.post('http://127.0.0.1:8000/image-handler/', {\r\n                \"file\": file.name,\r\n                ...typeOfImage('remove')\r\n            });\r\n\r\n        },\r\n        \r\n        onChange(info) {\r\n          const { status } = info.file;\r\n          if (status !== 'uploading') {\r\n            // console.log(info.file, info.fileList);\r\n          }\r\n          if (status === 'done') {\r\n            message.success(`${info.file.name} file uploaded successfully.`);\r\n          } else if (status === 'error') {\r\n            message.error(`${info.file.name} file upload failed.`);\r\n            // Reload image\r\n            \r\n            reloadProfilePicture();\r\n          }\r\n        },\r\n      };\r\n\r\n    const getProfile = () => {\r\n    axios.get('http://localhost:8000/userprofile/profile/' + localStorage.getItem('userProfileID'))\r\n    .then( res => {\r\n        // Load all profile data\r\n\r\n\r\n        reloadUsername(res.data['username']);\r\n        reloadEmail(res.data['email']);\r\n        reloadName(res.data['name']);\r\n        reloadLocation(res.data['location']);\r\n        reloadImgSalt(res.data['img_salt']);\r\n\r\n\r\n\r\n        setTimeout(() => message.success('Profile loaded successfully.'), 100);\r\n        }\r\n    )\r\n    .catch(err => {\r\n        message.error(`Your profile could not be loaded due to ` + err.message);\r\n    })\r\n    }\r\n\r\n    const reloadUsername = (data) => {\r\n        setUsername(data);\r\n    }\r\n\r\n    const reloadEmail = (data) => {\r\n        setEmail(data);\r\n    }\r\n\r\n    const reloadName = (data) => {\r\n        setName(data);\r\n    }\r\n\r\n    const reloadLocation = (data) => {\r\n        setLocation(data);\r\n    }\r\n\r\n    const reloadImgSalt = (data) => {\r\n        setImgSalt(data);\r\n    }\r\n\r\n    const reloadProfilePicture = () => {\r\n\r\n    }\r\n\r\n    useEffect(() => {\r\n        getProfile();\r\n    }, []); \r\n\r\n\r\n    return (\r\n        <div>   \r\n            \r\n            <Row gutter={[8, 48]}>\r\n                <Col xs={{ span: 6, offset: 2 }} lg={{ span: 6, offset: 2 }}>\r\n                    <Avatar shape=\"square\" size=\"large\" icon={img_salt == null ? <UserOutlined /> : ''} src={img_salt == null ? '' : ''}/>\r\n                </Col>\r\n                <Col xs={{ span: 5, offset: 1 }} lg={{ span: 6, offset: 2 }}>\r\n                    <h1>Your Profile</h1>\r\n                </Col>\r\n            </Row>\r\n\r\n            <Row gutter={[8, 48]}>\r\n                <Col xs={{ span: 6, offset: 2 }} lg={{ span: 6, offset: 2 }}>\r\n                    <Upload {...userProfilePictureUploadProps}>\r\n                        <Button\r\n                            size=\"small\">\r\n                            Change\r\n                        </Button>\r\n                    </Upload>\r\n                </Col>\r\n                <Col xs={{ span: 5, offset: 1 }} lg={{ span: 6, offset: 2 }}>\r\n                    Username: {img_salt == null ? <Skeleton active /> : username}\r\n                </Col>\r\n            </Row>\r\n\r\n\r\n            <Row gutter={[8, 48]}>\r\n                <Col xs={{ span: 6, offset: 2 }} lg={{ span: 6, offset: 2 }}>\r\n                </Col>\r\n                <Col xs={{ span: 5, offset: 1 }} lg={{ span: 6, offset: 2 }}>\r\n                    Email: {img_salt == null ? <Skeleton active /> : email}\r\n                </Col>\r\n            </Row>\r\n\r\n\r\n            <Row gutter={[8, 48]}>\r\n                <Col xs={{ span: 6, offset: 2 }} lg={{ span: 6, offset: 2 }}>\r\n                </Col>\r\n                <Col xs={{ span: 5, offset: 1 }} lg={{ span: 6, offset: 2 }}>\r\n                    Name: {img_salt == null ? <Skeleton active /> : name}\r\n                </Col>\r\n            </Row>\r\n\r\n\r\n        </div>\r\n    )\r\n}\r\n\r\nexport default UserProfile;\r\n"]},"metadata":{},"sourceType":"module"}